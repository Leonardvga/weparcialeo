<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventura del Saber - Juego Educativo 2¬∞ Primaria</title>
    <style>
        /* ESTILOS GENERALES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #c2e9fb 0%, #a1c4fd 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }
        
        .game-container {
            width: 95%;
            max-width: 900px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            overflow: hidden;
            position: relative;
        }

        /* ANIMACIONES GENERALES */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes shimmer {
            0% { background-position: -468px 0; }
            100% { background-position: 468px 0; }
        }

        /* PANTALLA DE INICIO */
        .start-screen {
            background: linear-gradient(45deg, #ffafbd, #ffc3a0);
            text-align: center;
            padding: 40px 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 1s ease-in-out;
        }
        
        .start-screen h1 {
            color: #6a11cb;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 3px 3px 5px rgba(0,0,0,0.2);
        }
        
        .character-selection {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }
        
        .character-card {
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            width: 150px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .character-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 20px rgba(0,0,0,0.2);
        }
        
        .character-card.selected {
            border: 4px solid #4CAF50;
            transform: scale(1.05);
        }
        
        .character-image {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            animation: float 3s ease-in-out infinite;
        }
        
        .start-button {
            background: linear-gradient(45deg, #11998e, #38ef7d);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(56, 239, 125, 0.4);
            margin-top: 30px;
            animation: pulse 2s infinite;
        }
        
        .start-button:hover {
            transform: scale(1.1);
            box-shadow: 0 7px 20px rgba(56, 239, 125, 0.6);
        }

        /* √ÅREA DE JUEGO PRINCIPAL */
        .game-area {
            padding: 30px;
            min-height: 600px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .game-header h2 {
            color: #6a11cb;
            font-size: 32px;
            animation: slideIn 0.5s ease-in-out;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .player-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #6a11cb;
            animation: float 3s ease-in-out infinite;
        }
        
        .player-stats {
            background-color: #f0f9ff;
            padding: 10px 15px;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .star-points {
            display: flex;
            align-items: center;
            color: #ff9800;
            font-weight: bold;
            font-size: 18px;
            gap: 5px;
        }
        
        .star-icon {
            font-size: 20px;
            animation: rotate 3s linear infinite;
        }
        
        .progress-container {
            margin: 20px 0;
            background-color: #e9ecef;
            border-radius: 10px;
            height: 25px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, #11998e, #38ef7d);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.4) 50%, 
                rgba(255,255,255,0) 100%);
            animation: shimmer 2s infinite;
            background-size: 150% 100%;
        }
        
        .level-indicator {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #495057;
            margin-bottom: 10px;
        }
        
        /* √ÅREA DE PREGUNTAS */
        .question-container {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }
        
        .question-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 7px;
            background: linear-gradient(90deg, #ff9966, #ff5e62);
        }
        
        .question-text {
            font-size: 24px;
            color: #212529;
            margin-bottom: 20px;
            text-align: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .question-image {
            display: block;
            max-width: 250px;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            animation: float 3s ease-in-out infinite;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 15px;
            margin-top: 25px;
        }
        
        .option-button {
            background-color: #fff;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px 20px;
            font-size: 18px;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 70px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .option-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #adb5bd;
        }
        
        .option-button.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
            animation: pulse 0.5s ease-in-out;
        }
        
        .option-button.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        /* PANTALLA DE FEEDBACK */
        .feedback {
            text-align: center;
            padding: 20px;
            margin: 20px 0;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
        }
        
        .feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }
        
        .feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
        
        .explanation {
            font-size: 16px;
            margin-top: 10px;
            padding: 10px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .next-button {
            background: linear-gradient(45deg, #007bff, #6610f2);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 20px;
            animation: pulse 2s infinite;
        }
        
        .next-button:hover {
            transform: scale(1.05);
            box-shadow: 0 7px 20px rgba(0,0,0,0.15);
        }
        
        /* PANTALLA DE NIVEL COMPLETADO */
        .level-complete {
            text-align: center;
            padding: 30px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .level-complete h2 {
            color: #6a11cb;
            font-size: 36px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        .celebration {
            font-size: 50px;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }
        
        .stats-container {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 5px 0;
            border-bottom: 1px solid #dee2e6;
        }
        
        .stat-item:last-child {
            border-bottom: none;
        }
        
        .award-icon {
            font-size: 40px;
            margin: 20px 0;
            animation: rotate 5s linear infinite;
        }
        
        .continue-button {
            background: linear-gradient(45deg, #ff9966, #ff5e62);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-top: 20px;
        }
        
        .continue-button:hover {
            transform: scale(1.1);
            box-shadow: 0 7px 20px rgba(0,0,0,0.3);
        }
        
        /* PANTALLA DE JUEGO COMPLETADO */
        .game-complete {
            text-align: center;
            padding: 30px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .game-complete h1 {
            color: #6a11cb;
            font-size: 42px;
            margin-bottom: 20px;
            text-shadow: 3px 3px 5px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }
        
        .trophy {
            font-size: 80px;
            margin: 30px 0;
            animation: bounce 2s infinite;
            color: #ffc107;
        }
        
        .final-stats {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
        }
        
        .stat-box {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            width: 150px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-box h3 {
            color: #6c757d;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #212529;
        }
        
        .certificate {
            background-color: #fff;
            border: 5px solid #ffc107;
            border-radius: 15px;
            padding: 20px;
            margin: 30px auto;
            max-width: 500px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            position: relative;
        }
        
        .certificate::before {
            content: "";
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px dashed #ffc107;
            border-radius: 10px;
            pointer-events: none;
        }
        
        .certificate h2 {
            color: #6a11cb;
            margin-bottom: 15px;
        }
        
        .certificate p {
            margin: 10px 0;
        }
        
        .certificate-name {
            font-size: 24px;
            font-weight: bold;
            color: #212529;
            margin: 15px 0;
        }
        
        .restart-button {
            background: linear-gradient(45deg, #11998e, #38ef7d);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(56, 239, 125, 0.4);
            margin-top: 30px;
        }
        
        .restart-button:hover {
            transform: scale(1.1);
            box-shadow: 0 7px 20px rgba(56, 239, 125, 0.6);
        }
        
        /* MINIJUEGOS */
        .minigame-container {
            padding: 20px;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .minigame-container h2 {
            color: #6a11cb;
            font-size: 30px;
            margin-bottom: 20px;
        }
        
        .math-tiles {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
            margin: 20px auto;
            max-width: 500px;
        }
        
        .math-tile {
            background-color: #fff;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .math-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .math-tile.selected {
            background-color: #cce5ff;
            border-color: #007bff;
        }
        
        .word-scramble {
            margin: 20px auto;
            max-width: 500px;
        }
        
        .scrambled-letters {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .letter-tile {
            width: 40px;
            height: 40px;
            background-color: #fff;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .letter-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .letter-tile.selected {
            background-color: #cce5ff;
            border-color: #007bff;
        }
        
        .answer-word {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
        }
        
        .answer-slot {
            width: 40px;
            height: 40px;
            background-color: #f8f9fa;
            border: 2px dashed #adb5bd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }
        
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
            margin: 20px auto;
            max-width: 500px;
        }
        
        .memory-card {
            height: 80px;
            background-color: #7952b3;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .memory-card.flipped {
            transform: rotateY(180deg);
        }
        
        .memory-card-front, .memory-card-back {
            width: 100%;
            height: 100%;
            position: absolute;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .memory-card-front {
            background-color: #7952b3;
            transform: rotateY(0deg);
        }
        
        .memory-card-back {
            background-color: #fff;
            transform: rotateY(180deg);
            font-size: 24px;
            font-weight: bold;
        }
        
        /* ESTILOS RESPONSIVOS */
        @media (max-width: 768px) {
            .game-container {
                width: 95%;
                margin: 20px auto;
            }
            
            .start-screen h1, .game-complete h1 {
                font-size: 36px;
            }
            
            .character-selection {
                flex-direction: column;
                align-items: center;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .final-stats {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .stat-box {
                width: 80%;
            }
            
            .math-tiles {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .memory-game {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* ANIMACIONES ADICIONALES PARA TRANSICIONES */
        .slide-out {
            animation: slideOut 0.5s forwards;
        }
        
        @keyframes slideOut {
            to { transform: translateX(50px); opacity: 0; }
        }
        
        .pop-in {
            animation: popIn 0.5s forwards;
        }
        
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* EFECTOS DE SONIDO Y M√öSICA */
        .sound-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 100;
            display: flex;
            gap: 10px;
        }
        
        .sound-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }
        
        .sound-button:hover {
            background-color: rgba(255, 255, 255, 1);
            transform: scale(1.1);
        }
        
        /* LOADER Y ANIMACIONES DE CARGA */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            animation: rotate 1s linear infinite;
        }
        
        /* TOOLTIP Y AYUDAS */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* DECORACI√ìN Y ELEMENTOS L√öDICOS */
        .floating-bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }
        
        .bubble {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            animation: float-up 10s linear infinite;
        }
        
        @keyframes float-up {
            0% { transform: translateY(100%) scale(0); opacity: 0; }
            50% { opacity: 0.5; }
            100% { transform: translateY(-100vh) scale(1); opacity: 0; }
        }
        
        /* ELEMENTOS ADICIONALES DE JUEGO */
        .timer {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 10px 15px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 18px;
            font-weight: bold;
            color: #495057;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }
        
        .timer-icon {
            font-size: 20px;
            color: #dc3545;
        }
        
        .hint-button {
            background-color: #ffc107;
            color: #212529;
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .hint-button:hover {
            background-color: #e0a800;
            transform: translateY(-3px);
        }
        
        .lifeline-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
        }
        
        .lifeline {
            width: 30px;
            height: 30px;
            background-color: #ff6b6b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .lifeline.used {
            background-color: #adb5bd;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- LOADER (PANTALLA DE CARGA) -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>
    
    <!-- CONTENEDOR PRINCIPAL DEL JUEGO -->
    <div class="game-container" id="game-container">
        <!-- CONTROLES DE SONIDO -->
        <div class="sound-controls">
            <button class="sound-button" id="music-toggle">üéµ</button>
            <button class="sound-button" id="sound-toggle">üîä</button>
        </div>
        
        <!-- PANTALLA DE INICIO -->
        <div class="start-screen" id="start-screen">
            <h1>Aventura del Saber</h1>
            <p>¬°Un emocionante viaje de aprendizaje para ni√±os de segundo grado!</p>
            
            <div class="character-selection">
                <div class="character-card" data-character="boy" onclick="selectCharacter('boy')">
                    <img src="/api/placeholder/100/100" alt="Ni√±o" class="character-image">
                    <h3>Lucas</h3>
                </div>
               <div class="character-card" data-character="girl" onclick="selectCharacter('girl')">
                    <img src="/api/placeholder/100/100" alt="Ni√±a" class="character-image">
                    <h3>Sof√≠a</h3>
                </div>
            </div>
            
            <input type="text" id="player-name" placeholder="Escribe tu nombre aqu√≠" class="player-name-input">
            <button class="start-button" id="start-button" onclick="startGame()">¬°Comenzar Aventura!</button>
        </div>
        
        <!-- √ÅREA DE JUEGO PRINCIPAL -->
        <div class="game-area" id="game-area">
            <div class="game-header">
                <h2 id="level-title">Nivel 1: Matem√°ticas B√°sicas</h2>
                <div class="player-info">
                    <img src="/api/placeholder/60/60" alt="Avatar" class="player-avatar" id="player-avatar">
                    <div class="player-stats">
                        <div class="star-points">
                            <span class="star-icon">‚≠ê</span>
                            <span id="points-display">0</span> puntos
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="level-indicator">Nivel <span id="current-level">1</span> de <span id="total-levels">5</span></div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
            </div>
            
            <div class="lifeline-container">
                <div class="lifeline" id="lifeline-1">‚ù§Ô∏è</div>
                <div class="lifeline" id="lifeline-2">‚ù§Ô∏è</div>
                <div class="lifeline" id="lifeline-3">‚ù§Ô∏è</div>
            </div>
            
            <div class="timer">
                <span class="timer-icon">‚è±Ô∏è</span>
                <span id="time-display">30</span>
            </div>
            
            <div class="question-container" id="question-container">
                <div class="question-text" id="question-text">¬øCu√°nto es 2 + 3?</div>
                <img src="/api/placeholder/250/150" alt="Imagen de pregunta" class="question-image" id="question-image">
                
                <div class="options-grid" id="options-grid">
                    <button class="option-button" onclick="checkAnswer(1)">4</button>
                    <button class="option-button" onclick="checkAnswer(2)">5</button>
                    <button class="option-button" onclick="checkAnswer(3)">6</button>
                    <button class="option-button" onclick="checkAnswer(4)">7</button>
                </div>
                
                <button class="hint-button" id="hint-button" onclick="showHint()">
                    <span>üîç</span> Pista
                </button>
            </div>
            
            <div class="feedback" id="feedback">
                <div id="feedback-text">¬°Respuesta correcta!</div>
                <div class="explanation" id="explanation">
                    2 + 3 = 5. ¬°Excelente trabajo sumando!
                </div>
                <button class="next-button" id="next-button" onclick="nextQuestion()">Siguiente Pregunta</button>
            </div>
        </div>
        
        <!-- PANTALLA DE MINIJUEGOS -->
        <div class="minigame-container" id="minigame-math">
            <h2>¬°Minijuego de Matem√°ticas!</h2>
            <p>Empareja los n√∫meros con sus resultados</p>
            
            <div class="math-tiles" id="math-tiles">
                <!-- Tiles se generar√°n din√°micamente -->
            </div>
            
            <button class="next-button" id="minigame-next" onclick="completeMiniGame()">Continuar</button>
        </div>
        
        <div class="minigame-container" id="minigame-words">
            <h2>¬°Juego de Palabras!</h2>
            <p>Ordena las letras para formar la palabra correcta</p>
            
            <div class="word-scramble">
                <div class="scrambled-letters" id="scrambled-letters">
                    <!-- Letras se generar√°n din√°micamente -->
                </div>
                
                <div class="answer-word" id="answer-word">
                    <!-- Espacios de respuesta se generar√°n din√°micamente -->
                </div>
            </div>
            
            <button class="next-button" id="word-next" onclick="checkWordAnswer()">Comprobar</button>
        </div>
        
        <div class="minigame-container" id="minigame-memory">
            <h2>¬°Juego de Memoria!</h2>
            <p>Encuentra los pares de conceptos relacionados</p>
            
            <div class="memory-game" id="memory-game">
                <!-- Tarjetas se generar√°n din√°micamente -->
            </div>
        </div>
        
        <!-- PANTALLA DE NIVEL COMPLETADO -->
        <div class="level-complete" id="level-complete">
            <h2>¬°Nivel Completado!</h2>
            <div class="celebration">üéâ</div>
            
            <div class="stats-container">
                <div class="stat-item">
                    <span>Respuestas Correctas:</span>
                    <span id="correct-answers">8/10</span>
                </div>
                <div class="stat-item">
                    <span>Puntos Obtenidos:</span>
                    <span id="level-points">240</span>
                </div>
                <div class="stat-item">
                    <span>Tiempo Total:</span>
                    <span id="level-time">3:45</span>
                </div>
            </div>
            
            <div class="award-icon">üèÜ</div>
            
            <button class="continue-button" id="continue-button" onclick="nextLevel()">Continuar al Siguiente Nivel</button>
        </div>
        
        <!-- PANTALLA DE JUEGO COMPLETADO -->
        <div class="game-complete" id="game-complete">
            <h1>¬°Felicitaciones!</h1>
            <p>Has completado todos los niveles de la Aventura del Saber</p>
            
            <div class="trophy">üèÜ</div>
            
            <div class="final-stats">
                <div class="stat-box">
                    <h3>Puntuaci√≥n</h3>
                    <div class="stat-value" id="final-score">1250</div>
                </div>
                <div class="stat-box">
                    <h3>Aciertos</h3>
                    <div class="stat-value" id="final-correct">42/50</div>
                </div>
                <div class="stat-box">
                    <h3>Niveles</h3>
                    <div class="stat-value" id="final-levels">5/5</div>
                </div>
            </div>
            
            <div class="certificate">
                <h2>Certificado de Logro</h2>
                <p>Este certificado se otorga a:</p>
                <div class="certificate-name" id="certificate-name">Nombre del Estudiante</div>
                <p>Por completar con √©xito la Aventura del Saber</p>
                <p>Fecha: <span id="certificate-date">2 de Abril de 2025</span></p>
            </div>
            
            <button class="restart-button" onclick="restartGame()">Jugar de Nuevo</button>
        </div>
        
        <!-- ELEMENTOS DECORATIVOS -->
        <div class="floating-bubbles" id="bubbles">
            <!-- Burbujas se generar√°n din√°micamente -->
        </div>
    </div>
    
    <script>
        // Variables globales del juego
        let playerName = "";
        let playerCharacter = "";
        let currentLevel = 1;
        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let totalQuestions = 10;
        let remainingLifelines = 3;
        let timer;
        let timeRemaining = 30;
        let musicOn = true;
        let soundOn = true;
        
        // Datos de preguntas (simulado)
        const gameLevels = [
            {
                title: "Nivel 1: Matem√°ticas B√°sicas",
                questions: [
                    {
                        question: "¬øCu√°nto es 2 + 3?",
                        options: ["4", "5", "6", "7"],
                        correctAnswer: 1,
                        explanation: "2 + 3 = 5. ¬°Excelente trabajo sumando!",
                        image: "/api/placeholder/250/150"
                    },
                    {
                        question: "¬øCu√°nto es 10 - 4?",
                        options: ["4", "5", "6", "7"],
                        correctAnswer: 2,
                        explanation: "10 - 4 = 6. ¬°Muy bien restando!",
                        image: "/api/placeholder/250/150"
                    },
                    // M√°s preguntas para el nivel 1...
                ]
            },
            {
                title: "Nivel 2: Lectura y Comprensi√≥n",
                questions: [
                    {
                        question: "¬øQu√© letra falta en la palabra 'C_sa'?",
                        options: ["a", "e", "i", "o"],
                        correctAnswer: 0,
                        explanation: "La palabra correcta es 'Casa'.",
                        image: "/api/placeholder/250/150"
                    },
                    // M√°s preguntas para el nivel 2...
                ]
            },
            // M√°s niveles...
        ];
        
        // Funciones del juego
        function selectCharacter(character) {
            playerCharacter = character;
            document.querySelectorAll('.character-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`.character-card[data-character="${character}"]`).classList.add('selected');
        }
        
        function startGame() {
            playerName = document.getElementById('player-name').value || "Aventurero";
            if (!playerCharacter) {
                alert("¬°Por favor selecciona un personaje!");
                return;
            }
            
            // Actualizar interfaz
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            document.getElementById('player-avatar').src = playerCharacter === 'boy' ? 
                "/api/placeholder/60/60" : "/api/placeholder/60/60";
            
            // Configurar nivel
            loadLevel(currentLevel);
            loadQuestion(currentQuestion);
            document.getElementById('feedback').style.display = 'none';
            
            // Iniciar temporizador
            startTimer();
            
            // Crear burbujas decorativas
            createBubbles();
        }
        
        function loadLevel(level) {
            if (level > gameLevels.length) {
                completeGame();
                return;
            }
            
            currentLevel = level;
            currentQuestion = 0;
            correctAnswers = 0;
            
            document.getElementById('level-title').textContent = gameLevels[level-1].title;
            document.getElementById('current-level').textContent = level;
            document.getElementById('total-levels').textContent = gameLevels.length;
            updateProgressBar();
        }
        
        function loadQuestion(questionIndex) {
            const levelData = gameLevels[currentLevel-1];
            if (questionIndex >= levelData.questions.length) {
                completeLevel();
                return;
            }
            
            const question = levelData.questions[questionIndex];
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-image').src = question.image;
            
            // Cargar opciones
            const optionsGrid = document.getElementById('options-grid');
            optionsGrid.innerHTML = '';
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = option;
                button.onclick = () => checkAnswer(index);
                optionsGrid.appendChild(button);
            });
            
            // Reiniciar temporizador
            resetTimer();
        }
        
        function checkAnswer(selectedIndex) {
            clearInterval(timer);
            const levelData = gameLevels[currentLevel-1];
            const question = levelData.questions[currentQuestion];
            
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedback-text');
            const explanation = document.getElementById('explanation');
            
            // Verificar respuesta
            if (selectedIndex === question.correctAnswer) {
                // Respuesta correcta
                feedbackText.textContent = "¬°Respuesta correcta!";
                feedback.className = "feedback correct";
                explanation.textContent = question.explanation;
                
                // Actualizar puntuaci√≥n
                score += 10 + timeRemaining;
                document.getElementById('points-display').textContent = score;
                correctAnswers++;
            } else {
                // Respuesta incorrecta
                feedbackText.textContent = "Respuesta incorrecta";
                feedback.className = "feedback incorrect";
                explanation.textContent = question.explanation;
                
                // Reducir vidas
                remainingLifelines--;
                if (remainingLifelines >= 0) {
                    document.getElementById(`lifeline-${remainingLifelines+1}`).classList.add('used');
                }
                
                // Verificar si se acabaron las vidas
                if (remainingLifelines <= 0) {
                    // Game over
                    setTimeout(() => {
                        alert("¬°Se acabaron tus vidas! Int√©ntalo de nuevo.");
                        restartGame();
                    }, 2000);
                    return;
                }
            }
            
            // Mostrar retroalimentaci√≥n
            feedback.style.display = 'block';
            document.getElementById('question-container').style.display = 'none';
        }
        
        function nextQuestion() {
            currentQuestion++;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('question-container').style.display = 'block';
            loadQuestion(currentQuestion);
            updateProgressBar();
        }
        
        function updateProgressBar() {
            const levelData = gameLevels[currentLevel-1];
            const progress = (currentQuestion / levelData.questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }
        
        function completeLevel() {
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('level-complete').style.display = 'block';
            
            const levelData = gameLevels[currentLevel-1];
            document.getElementById('correct-answers').textContent = `${correctAnswers}/${levelData.questions.length}`;
            document.getElementById('level-points').textContent = score;
            
            // Si es un nivel par, mostrar minijuego
            if (currentLevel % 2 === 0) {
                setTimeout(() => {
                    document.getElementById('level-complete').style.display = 'none';
                    showMiniGame();
                }, 3000);
            }
        }
        
        function nextLevel() {
            document.getElementById('level-complete').style.display = 'none';
            currentLevel++;
            loadLevel(currentLevel);
            document.getElementById('game-area').style.display = 'block';
        }
        
        function completeGame() {
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('game-complete').style.display = 'block';
            
            // Actualizar estad√≠sticas finales
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-correct').textContent = `${correctAnswers}/${totalQuestions}`;
            document.getElementById('final-levels').textContent = `${currentLevel-1}/${gameLevels.length}`;
            document.getElementById('certificate-name').textContent = playerName;
            
            const today = new Date();
            document.getElementById('certificate-date').textContent = today.toLocaleDateString('es-ES');
        }
        
        function restartGame() {
            // Reiniciar variables
            currentLevel = 1;
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            remainingLifelines = 3;
            
            // Reiniciar interfaz
            document.getElementById('game-complete').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
            document.getElementById('points-display').textContent = '0';
            
            // Reiniciar vidas
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`lifeline-${i}`).classList.remove('used');
            }
        }
        
        function startTimer() {
            timeRemaining = 30;
            document.getElementById('time-display').textContent = timeRemaining;
            
            timer = setInterval(() => {
                timeRemaining--;
                document.getElementById('time-display').textContent = timeRemaining;
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    // Tiempo agotado, contar como respuesta incorrecta
                    checkAnswer(-1);
                }
            }, 1000);
        }
        
        function resetTimer() {
            clearInterval(timer);
            startTimer();
        }
        
        function showHint() {
            const levelData = gameLevels[currentLevel-1];
            const question = levelData.questions[currentQuestion];
            
            // Eliminar una opci√≥n incorrecta aleatoria
            const options = document.querySelectorAll('.option-button');
            const incorrectOptions = [];
            
            options.forEach((option, index) => {
                if (index !== question.correctAnswer) {
                    incorrectOptions.push(option);
                }
            });
            
            const randomIncorrect = Math.floor(Math.random() * incorrectOptions.length);
            incorrectOptions[randomIncorrect].style.opacity = '0.3';
            incorrectOptions[randomIncorrect].disabled = true;
            
            // Deshabilitar bot√≥n de pista
            document.getElementById('hint-button').disabled = true;
            document.getElementById('hint-button').style.opacity = '0.5';
        }
        
        function showMiniGame() {
            // Seleccionar minijuego aleatorio
            const miniGames = ['minigame-math', 'minigame-words', 'minigame-memory'];
            const randomGame = miniGames[Math.floor(Math.random() * miniGames.length)];
            
            document.getElementById(randomGame).style.display = 'block';
            
            // Configurar minijuego
            if (randomGame === 'minigame-math') {
                setupMathGame();
            } else if (randomGame === 'minigame-words') {
                setupWordGame();
            } else {
                setupMemoryGame();
            }
        }
        
        function setupMathGame() {
            const mathTiles = document.getElementById('math-tiles');
            mathTiles.innerHTML = '';
            
            // Crear pares de operaciones y resultados
            const pairs = [
                { op: "2 + 3", result: "5" },
                { op: "7 - 2", result: "5" },
                { op: "4 + 4", result: "8" },
                { op: "10 - 5", result: "5" },
                { op: "3 √ó 2", result: "6" },
                { op: "8 √∑ 2", result: "4" },
                { op: "1 + 1", result: "2" },
                { op: "9 - 4", result: "5" }
            ];
            
            // Mezclar pares
            for (let i = 0; i < pairs.length; i++) {
                // Crear tile para operaci√≥n
                const opTile = document.createElement('div');
                opTile.className = 'math-tile';
                opTile.textContent = pairs[i].op;
                opTile.dataset.pair = i;
                opTile.onclick = () => selectMathTile(opTile);
                mathTiles.appendChild(opTile);
                
                // Crear tile para resultado
                const resultTile = document.createElement('div');
                resultTile.className = 'math-tile';
                resultTile.textContent = pairs[i].result;
                resultTile.dataset.pair = i;
                resultTile.onclick = () => selectMathTile(resultTile);
                mathTiles.appendChild(resultTile);
            }
            
            // Mezclar tiles
            const tiles = mathTiles.children;
            for (let i = tiles.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                mathTiles.appendChild(tiles[j].cloneNode(true));
                mathTiles.removeChild(tiles[j]);
            }
        }
        
        let selectedTile = null;
        function selectMathTile(tile) {
            if (tile.classList.contains('matched')) return;
            
            if (!selectedTile) {
                // Primera selecci√≥n
                selectedTile = tile;
                tile.classList.add('selected');
            } else {
                // Segunda selecci√≥n
                if (selectedTile.dataset.pair === tile.dataset.pair && selectedTile !== tile) {
                    // Coincidencia
                    selectedTile.classList.remove('selected');
                    selectedTile.classList.add('matched');
                    tile.classList.add('matched');
                    
                    // Verificar si se complet√≥ el juego
                    const remainingTiles = document.querySelectorAll('.math-tile:not(.matched)');
                    if (remainingTiles.length === 0) {
                        document.getElementById('minigame-next').style.display = 'block';
                    }
                } else {
                    // No coinciden
                    const prevSelected = selectedTile;
                    setTimeout(() => {
                        prevSelected.classList.remove('selected');
                        tile.classList.remove('selected');
                    }, 500);
                }
                selectedTile = null;
            }
        }
        
        function setupWordGame() {
            const words = ["CASA", "√ÅRBOL", "PERRO", "NI√ëO", "LIBRO", "JUEGO", "AGUA", "L√ÅPIZ"];
            const randomWord = words[Math.floor(Math.random() * words.length)];
            
            // Crear espacios para respuesta
            const answerWord = document.getElementById('answer-word');
            answerWord.innerHTML = '';
            for (let i = 0; i < randomWord.length; i++) {
                const slot = document.createElement('div');
                slot.className = 'answer-slot';
                slot.dataset.index = i;
                answerWord.appendChild(slot);
            }
            
            // Mezclar letras
            const scrambledLetters = document.getElementById('scrambled-letters');
            scrambledLetters.innerHTML = '';
            const letters = randomWord.split('');
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            
            // Mostrar letras mezcladas
            letters.forEach((letter, index) => {
                const tile = document.createElement('div');
                tile.className = 'letter-tile';
                tile.textContent = letter;
                tile.dataset.letter = letter;
                tile.onclick = () => selectLetter(tile);
                scrambledLetters.appendChild(tile);
            });
        }
        
        function selectLetter(tile) {
            if (tile.classList.contains('selected')) return;
            
            // Encontrar pr√≥ximo espacio vac√≠o
            const emptySlot = document.querySelector('.answer-slot:empty');
            if (emptySlot) {
                emptySlot.textContent = tile.dataset.letter;
                tile.classList.add('selected');
                
                // Verificar si se complet√≥ la palabra
                const slots = document.querySelectorAll('.answer-slot');
                let isFull = true;
                for (let slot of slots) {
                    if (!slot.textContent) {
                        isFull = false;
                        break;
                    }
                }
                
                if (isFull) {
                    // Comprobar si es correcta
                    checkWordAnswer();
                }
            }
        }
        
        function checkWordAnswer() {
            const slots = document.querySelectorAll('.answer-slot');
            let word = '';
            slots.forEach(slot => {
                word += slot.textContent || '';
            });
            
            const words = ["CASA", "√ÅRBOL", "PERRO", "NI√ëO", "LIBRO", "JUEGO", "AGUA", "L√ÅPIZ"];
            if (words.includes(word)) {
                // Palabra correcta
                document.getElementById('word-next').textContent = "¬°Correcto! Continuar";
                // A√±adir puntos
                score += 50;
                document.getElementById('points-display').textContent = score;
                
                // Continuar despu√©s de 2 segundos
                setTimeout(completeMiniGame, 2000);
            } else {
                // Palabra incorrecta
                // Sacudir animaci√≥n
                const answerWord = document.getElementById('answer-word');
                answerWord.classList.add('shake');
                setTimeout(() => {
                    answerWord.classList.remove('shake');
                    
                    // Limpiar respuesta
                    slots.forEach(slot => {
                        slot.textContent = '';
                    });
                    
                    // Resetear letras seleccionadas
                    const letters = document.querySelectorAll('.letter-tile');
                    letters.forEach(letter => {
                        letter.classList.remove('selected');
                    });
                }, 500);
            }
        }
        
        function setupMemoryGame() {
            const memoryGame = document.getElementById('memory-game');
            memoryGame.innerHTML = '';
            
            // Crear pares de coincidencias
            const pairs = [
                { item1: "2", item2: "DOS" },
                { item1: "3", item2: "TRES" },
                { item1: "4", item2: "CUATRO" },
                { item1: "5", item2: "CINCO" },
                { item1: "6", item2: "SEIS" },
                { item1: "A", item2: "a" },
            ];
            
            // Crear tarjetas
            const cards = [];
            pairs.forEach((pair, index) => {
                // Tarjeta 1
                const card1 = document.createElement('div');
                card1.className = 'memory-card';
                card1.dataset.pair = index;
                card1.innerHTML = `
                    <div class="memory-card-front"></div>
                    <div class="memory-card-back">${pair.item1}</div>
                `;
                card1.onclick = () => flipCard(card1);
                cards.push(card1);
                
                // Tarjeta 2
                const card2 = document.createElement('div');
                card2.className = 'memory-card';
                card2.dataset.pair = index;
                card2.innerHTML = `
                    <div class="memory-card-front"></div>
                    <div class="memory-card-back">${pair.item2}</div>
                `;
                card2.onclick = () => flipCard(card2);
                cards.push(card2);
            });
            
            // Mezclar tarjetas
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            
            // A√±adir tarjetas al juego
            cards.forEach(card => {
                memoryGame.appendChild(card);
            });
        }
        
        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        
        function flipCard(card) {
            if (lockBoard) return;
            if (card === firstCard) return;
            
            card.classList.add('flipped');
            
            if (!firstCard) {
                // Primera carta
                firstCard = card;
                return;
            }
            
            // Segunda carta
            secondCard = card;
            checkForMatch();
        }
        
        function checkForMatch() {
            const isMatch = firstCard.dataset.pair === secondCard.dataset.pair;
            
            if (isMatch) {
                disableCards();
                
                // Verificar si se complet√≥ el juego
                const remainingCards = document.querySelectorAll('.memory-card:not(.flipped)');
                if (remainingCards.length === 0) {
                    // Juego completado
                    setTimeout(completeMiniGame, 1000);
                }
            } else {
                unflipCards();
            }
        }
        
        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            
            resetBoard();
        }
        
        function unflipCards() {
            lockBoard = true;
            
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                
                resetBoard();
            }, 1000);
        }
        
        function resetBoard() {
            [firstCard, secondCard] = [null, null];
            lockBoard = false;
        }
        
        function completeMiniGame() {
            // Ocultar todos los minijuegos
            document.getElementById('minigame-math').style.display = 'none';
            document.getElementById('minigame-words').style.display = 'none';
            document.getElementById('minigame-memory').style.display = 'none';
            
            // Continuar con el siguiente nivel
            nextLevel();
        }
        
        function createBubbles() {
            const bubbles = document.getElementById('bubbles');
            bubbles.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.style.left = `${Math.random() * 100}%`;
                bubble.style.width = `${Math.random() * 50 + 10}px`;
                bubble.style.height = bubble.style.width;
                bubble.style.animationDuration = `${Math.random() * 5 + 5}s`;
               bubble.style.animationDelay = `${Math.random() * 2}s`;
                bubbles.appendChild(bubble);
            }
        }
        
        function toggleMusic() {
            musicOn = !musicOn;
            const musicButton = document.getElementById('music-button');
            if (musicOn) {
                // Aqu√≠ se iniciar√≠a la m√∫sica si tuvi√©ramos un elemento de audio
                musicButton.innerHTML = '<span>üîä</span> M√∫sica';
            } else {
                // Aqu√≠ se pausar√≠a la m√∫sica
                musicButton.innerHTML = '<span>üîá</span> M√∫sica';
            }
        }
        
        function toggleSound() {
            soundOn = !soundOn;
            const soundButton = document.getElementById('sound-button');
            if (soundOn) {
                soundButton.innerHTML = '<span>üîä</span> Sonidos';
            } else {
                soundButton.innerHTML = '<span>üîá</span> Sonidos';
            }
        }
        
        function playSound(soundType) {
            if (!soundOn) return;
            
            // Aqu√≠ se reproducir√≠a el sonido correspondiente
            // Por ejemplo: const audio = new Audio(`sounds/${soundType}.mp3`);
            // audio.play();
        }
        
        // Funci√≥n para abrir instrucciones
        function showInstructions() {
            const modal = document.getElementById('instructions-modal');
            modal.style.display = 'flex';
        }
        
        function closeInstructions() {
            const modal = document.getElementById('instructions-modal');
            modal.style.display = 'none';
        }
        
        // Funciones para personalizaci√≥n
        function openSettings() {
            const settingsPanel = document.getElementById('settings-panel');
            settingsPanel.style.display = 'block';
        }
        
        function closeSettings() {
            const settingsPanel = document.getElementById('settings-panel');
            settingsPanel.style.display = 'none';
        }
        
        function changeTheme(theme) {
            const gameContainer = document.getElementById('game-container');
            // Eliminar todas las clases de tema anteriores
            gameContainer.classList.remove('theme-forest', 'theme-space', 'theme-ocean', 'theme-desert');
            // A√±adir el nuevo tema
            gameContainer.classList.add(`theme-${theme}`);
            
            // Guardar preferencia de tema
            localStorage.setItem('gameTheme', theme);
        }
        
        function changeGameDifficulty(difficulty) {
            // Implementar l√≥gica para cambiar la dificultad
            // Por ejemplo: ajustar tiempo de respuesta, n√∫mero de opciones, etc.
            if (difficulty === 'easy') {
                timeRemaining = 45; // M√°s tiempo para responder
            } else if (difficulty === 'normal') {
                timeRemaining = 30; // Tiempo est√°ndar
            } else if (difficulty === 'hard') {
                timeRemaining = 20; // Menos tiempo para responder
            }
            
            // Guardar preferencia de dificultad
            localStorage.setItem('gameDifficulty', difficulty);
        }
        
        // Funciones para guardar y cargar progreso
        function saveProgress() {
            const gameProgress = {
                playerName: playerName,
                playerCharacter: playerCharacter,
                currentLevel: currentLevel,
                score: score,
                remainingLifelines: remainingLifelines
            };
            
            localStorage.setItem('gameProgress', JSON.stringify(gameProgress));
            
            // Mostrar confirmaci√≥n
            alert("¬°Progreso guardado correctamente!");
        }
        
        function loadProgress() {
            const savedProgress = localStorage.getItem('gameProgress');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                
                playerName = progress.playerName;
                playerCharacter = progress.playerCharacter;
                currentLevel = progress.currentLevel;
                score = progress.score;
                remainingLifelines = progress.remainingLifelines;
                
                // Actualizar interfaz
                document.getElementById('points-display').textContent = score;
                
                // Actualizar vidas
                for (let i = 3; i > remainingLifelines; i--) {
                    document.getElementById(`lifeline-${i}`).classList.add('used');
                }
                
                // Cargar nivel y pregunta
                loadLevel(currentLevel);
                
                // Ocultar pantalla de inicio y mostrar √°rea de juego
                document.getElementById('start-screen').style.display = 'none';
                document.getElementById('game-area').style.display = 'block';
                
                return true;
            }
            
            return false;
        }
        
        // Funci√≥n para compartir resultados
        function shareResults() {
            const text = `¬°He obtenido ${score} puntos en "La Aventura del Saber"! ¬°Intenta superarme!`;
            
            // Intentar usar la API de compartir si est√° disponible
            if (navigator.share) {
                navigator.share({
                    title: 'Mi puntuaci√≥n en La Aventura del Saber',
                    text: text,
                    url: window.location.href
                }).catch(err => {
                    console.error('Error al compartir:', err);
                });
            } else {
                // Fallback - copiar al portapapeles
                const dummy = document.createElement('textarea');
                document.body.appendChild(dummy);
                dummy.value = text;
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
                
                alert('¬°Texto copiado al portapapeles! Comp√°rtelo en tus redes sociales.');
            }
        }
        
        // Inicializaci√≥n y carga de datos guardados
        window.onload = function() {
            // Intentar cargar progreso guardado
            if (!loadProgress()) {
                // Si no hay progreso guardado, mostrar pantalla de inicio
                document.getElementById('start-screen').style.display = 'block';
            }
            
            // Cargar tema guardado si existe
            const savedTheme = localStorage.getItem('gameTheme');
            if (savedTheme) {
                changeTheme(savedTheme);
            }
            
            // Cargar dificultad guardada si existe
            const savedDifficulty = localStorage.getItem('gameDifficulty');
            if (savedDifficulty) {
                changeGameDifficulty(savedDifficulty);
            }
            
            // Inicializar los botones de sonido y m√∫sica
            document.getElementById('music-button').innerHTML = musicOn ? 
                '<span>üîä</span> M√∫sica' : '<span>üîá</span> M√∫sica';
            document.getElementById('sound-button').innerHTML = soundOn ? 
                '<span>üîä</span> Sonidos' : '<span>üîá</span> Sonidos';
        };
        
        // Funciones para accesibilidad
        function increaseTextSize() {
            const gameContainer = document.getElementById('game-container');
            const currentSize = parseFloat(getComputedStyle(gameContainer).fontSize);
            gameContainer.style.fontSize = (currentSize * 1.2) + 'px';
        }
        
        function decreaseTextSize() {
            const gameContainer = document.getElementById('game-container');
            const currentSize = parseFloat(getComputedStyle(gameContainer).fontSize);
            gameContainer.style.fontSize = (currentSize / 1.2) + 'px';
        }
        
        function toggleHighContrast() {
            const gameContainer = document.getElementById('game-container');
            gameContainer.classList.toggle('high-contrast');
        }
        
        // A√±adir funcionalidad de escape para cerrar modales
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                // Cerrar modales si est√°n abiertos
                closeInstructions();
                closeSettings();
            }
        });
    </script>
    </body>
    </html>
